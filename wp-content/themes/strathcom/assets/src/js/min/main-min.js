!function($,e,t){"use strict";var i,n=require("./dropdown-nested"),o=require("./tabs");e.Util=require("../../bower_components/bootstrap/dist/js/umd/util.js"),e.Collapse=require("../../bower_components/bootstrap/dist/js/umd/collapse.js"),e.strat=e.strat||{init:function(){i.jsStart(),i.initCollapsibleHeader(),i.initRevealEffect(),i.initImageSlider(),i.initLightbox(),i.initAccordions(),i.initTogglers(),i.initSplash(),i.printStart(),i.initRange()},jsStart:function(){$("html").removeClass("nojs")},printStart:function(){$("._print").click(function(e){e.preventDefault(),window.print()})},initRange:function(){var e=document.getElementById("range-slider"),t=$("#price_range__gte"),i=$("#price_range__lte"),n=parseInt(t.val(),10),o=parseInt(i.val(),10);e&&"undefined"!=typeof noUiSlider&&(noUiSlider.create(e,{start:[n,o],connect:!0,range:{min:n,max:o}}),e.noUiSlider.on("update",function(e,n){var o=e[n];o=1e3*Math.round(o/1e3),n?(1e3>o&&(o=1e3),i.val(o)):t.val(o)}),t.on("change",function(){e.noUiSlider.set([this.value,null])}),i.on("change",function(){e.noUiSlider.set([null,this.value])}))},initCollapsibleHeader:function(){var e,i,n,o,a="expanded-header",s=$(window);$("body").hasClass("home")&&0!==$(".collapsible-header").length&&(e=.66*$(".splash").height()||650,n=$(".page-wrapper"),o=n.hasClass(a),s.on("scroll",t.throttle(function(t){i=s.scrollTop(),o&&i>e?(o=!1,n.removeClass(a)):!o&&e>i&&(o=!0,n.addClass(a))},100)),s.trigger("scroll"))},initRevealEffect:function(){var e,i,n=$(window),o=[{container:$(".container-slant"),el:[{selector:".content, figure",effect:"fade-slide"}]},{container:$(".service-centre"),el:[{selector:".content",effect:"fade-slide"},{selector:".img-overlay",effect:"fade-up-slow"}]},{container:$(".used-superstore"),el:[{selector:"figure",effect:"fade-slide"}]},{container:$(".home-content"),el:[{selector:".content",effect:"fade-slide"}]}];return i=function(e){t.each(e.el,function(t){e.container.find(t.selector).addClass(t.effect)}),e.shown=!0},"undefined"==typeof jQuery.fn.visible?(t.each(o,function(e){i(e)}),!1):(n.on("scroll",t.throttle(function(){e=n.scrollTop(),t.each(o,function(e){(t.isUndefined(e.shown)||!0!==e.shown)&&e.container.visible(!0)&&i(e)})},100)),void n.trigger("scroll"))},initImageSlider:function(){$.each($('[data-toggle="product-carousel"]'),function(){var e,i,n,o,a,s,l=$(this),r=l.find(".image-slider"),c=l.find(".image-carousel"),d=0!==r.length,f=0!==c.length;e={namespace:"carousel-",selector:".slides > li",animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,touch:!0},f&&(a=function(){var e=Number(c.data("grid-size"));return 600>c.width()?Math.ceil(e/3):900>c.width()?Math.ceil(e/2):e},s=function(){var e=a();c.data("flexslider").vars.minItems=e,c.data("flexslider").vars.maxItems=e,c.flexslider(0)},o=a(),i=$.extend({},e,{itemWidth:120,itemMargin:0,minItems:o,maxItems:o})),d&&(n=$.extend({},e,{})),f&&d&&(i.asNavFor=r,n.sync=c),d&&r.flexslider(n),f&&(c.flexslider(i),$(window).on("resize",t.throttle(s,100)))})},initLightbox:function(){e.baguetteBox.run("[data-lightbox]")},initAccordions:function(){var e=".filters dt",t=$(".filters-panel");t.on("click",e,function(e){e.preventDefault(),$(this).toggleClass("state-closed")})},initTogglers:function(){var e=$("[data-toggled]");e.on(" click",function(e){e.preventDefault(),$($(this).data("toggled")).toggleClass("state-toggled")})},initSplash:function(){var i,n,o,a,s,l=null,r=!1,c=$(".splash"),d=!1,f=$(".page-wrapper"),u=$(".site-header"),h=$(window);0!==c.length&&(d=c.hasClass("splash-video")&&0!==c.find("iframe").length,s=function(i,n){t.isUndefined(e.strathcomVideoSplashPlayer)||(t.isNull(l)&&(l=e.strathcomVideoSplashPlayer),"play"===i?l.playVideo():"pause"===i?l.pauseVideo():"setSize"===i&&l.setSize(16/9*n.height,n.height))},o=function(){var e=h.scrollTop(),t=e>=n&&n+i>=e||n>=e&&e+i>=n;r||t?r&&t&&(r=!1,s("play"),c.css("visibility","")):(r=!0,s("pause"),c.css("visibility","hidden"))},a=function(){i=h.height(),n=c.offset().top,f.hasClass("expanded-header")||(i-=u.outerHeight()),c.height(i),d&&(s("setSize",{height:i}),o())},a(),h.on("resize",t.throttle(a,100)),d&&h.on("scroll",t.throttle(o,100)))}},i=e.strat,$(function(){i.init()})}(jQuery,window,window._);